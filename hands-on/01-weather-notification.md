# Hands-on 1: ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® üå§Ô∏è

**‡∏£‡∏∞‡∏î‡∏±‡∏ö:** ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô  
**‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ:** 45-60 ‡∏ô‡∏≤‡∏ó‡∏µ  
**‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏î‡πâ:** ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏ä‡πâ‡∏≤

---

## üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢

‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà:
1. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ó‡∏∏‡∏Å‡πÄ‡∏ä‡πâ‡∏≤ 8:00 ‡∏ô.
2. ‡∏ñ‡πâ‡∏≤‡∏ù‡∏ô‡∏ï‡∏Å‡∏™‡πà‡∏á Line Notify ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
3. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Google Sheets ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô
4. ‡∏™‡πà‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå

---

## üìã ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°

### 1. API Keys ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ
- ‚úÖ OpenWeatherMap API (‡∏ü‡∏£‡∏µ)
- ‚úÖ Line Notify Token (‡∏ü‡∏£‡∏µ)
- ‚úÖ Google Sheets API (‡∏ü‡∏£‡∏µ)

### 2. ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á
- ‚úÖ n8n (‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß)
- ‚úÖ Google Account
- ‚úÖ Line Account

---

## üîë ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° API Keys

### 1.1 ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ OpenWeatherMap API

**Step 1:** ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://openweathermap.org/api
1. ‡∏Ñ‡∏•‡∏¥‡∏Å "Sign Up" (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ account)
2. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•
3. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà "API Keys" tab
4. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å API key

**Step 2:** ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API
```bash
# ‡πÄ‡∏õ‡∏¥‡∏î browser ‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL ‡∏ô‡∏µ‡πâ
https://api.openweathermap.org/data/2.5/weather?q=Bangkok&appid=YOUR_API_KEY&units=metric
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ:**
```json
{
  "main": {
    "temp": 32.5,
    "humidity": 65
  },
  "weather": [
    {
      "main": "Rain",
      "description": "light rain"
    }
  ]
}
```

### 1.2 ‡∏™‡∏£‡πâ‡∏≤‡∏á Line Notify Token

**Step 1:** ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://notify-bot.line.me/
1. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Line account
2. ‡∏Ñ‡∏•‡∏¥‡∏Å "Generate token"
3. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠: "Weather Alert"
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (‡∏´‡∏£‡∏∑‡∏≠ 1-on-1 chat)
5. ‡∏Ñ‡∏•‡∏¥‡∏Å "Generate token"
6. **‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö token ‡πÑ‡∏ß‡πâ** (‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß!)

**Step 2:** ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Line Notify
```bash
curl -X POST https://notify-api.line.me/api/notify \
-H "Authorization: Bearer YOUR_LINE_TOKEN" \
-F "message=‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°"
```

### 1.3 ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Google Sheets API

**Step 1:** ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Google Cloud Console
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://console.cloud.google.com/
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Project ‡πÉ‡∏´‡∏°‡πà: "n8n-weather"
3. ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ Google Sheets API:
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà "APIs & Services" > "Library"
   - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ "Google Sheets API"
   - ‡∏Ñ‡∏•‡∏¥‡∏Å "Enable"

**Step 2:** ‡∏™‡∏£‡πâ‡∏≤‡∏á Service Account
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà "APIs & Services" > "Credentials"
2. ‡∏Ñ‡∏•‡∏¥‡∏Å "Create Credentials" > "Service Account"
3. ‡∏ä‡∏∑‡πà‡∏≠: "n8n-weather-bot"
4. ‡∏™‡∏£‡πâ‡∏≤‡∏á Key (JSON format)
5. ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå JSON

**Step 3:** ‡∏™‡∏£‡πâ‡∏≤‡∏á Google Sheet
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://sheets.google.com
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Sheet ‡πÉ‡∏´‡∏°‡πà‡∏ä‡∏∑‡πà‡∏≠ "Weather Data"
3. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ columns ‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:
   ```
   A1: Date
   B1: Time  
   C1: Temperature
   D1: Humidity
   E1: Weather
   F1: Description
   G1: Rain Alert
   ```
4. Share sheet ‡∏Å‡∏±‡∏ö Service Account email
   - ‡∏Ñ‡∏•‡∏¥‡∏Å "Share"
   - ‡πÉ‡∏™‡πà email ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå JSON (field: client_email)
   - ‡πÉ‡∏´‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå "Editor"

---

## üîß ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏™‡∏£‡πâ‡∏≤‡∏á Workflow ‡πÉ‡∏ô n8n

### 2.1 ‡πÄ‡∏õ‡∏¥‡∏î n8n ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Workflow ‡πÉ‡∏´‡∏°‡πà

1. ‡πÄ‡∏õ‡∏¥‡∏î browser ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `http://localhost:5678`
2. ‡∏Ñ‡∏•‡∏¥‡∏Å "New workflow"
3. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠ "Weather Alert System"

### 2.2 Node 1: Schedule Trigger

**Step 1:** ‡∏•‡∏≤‡∏Å "Schedule Trigger" ‡∏à‡∏≤‡∏Å Triggers
```
Settings:
- Trigger Interval: Cron
- Cron Expression: 0 8 * * *
- Timezone: Asia/Bangkok
```

**‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Cron:**
- `0 8 * * *` = ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 8:00 ‡∏ô.
- `0 20 * * 0` = ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡πÄ‡∏ß‡∏•‡∏≤ 8:00 ‡∏ô.

**Step 2:** ‡∏Ñ‡∏•‡∏¥‡∏Å "Execute Node" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### 2.3 Node 2: HTTP Request (‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Å‡∏≤‡∏®)

**Step 1:** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Schedule Trigger ‚Üí HTTP Request

**Step 2:** ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ HTTP Request:
```
Authentication: None
Request Method: GET
URL: https://api.openweathermap.org/data/2.5/weather
Query Parameters:
  q: Bangkok
  appid: {{ $env.OPENWEATHER_API_KEY }}
  units: metric
  lang: th
```

**Step 3:** ‡πÄ‡∏û‡∏¥‡πà‡∏° Environment Variable
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Settings ‚Üí Environment Variables
2. ‡πÄ‡∏û‡∏¥‡πà‡∏°: `OPENWEATHER_API_KEY` = your_actual_api_key

**Step 4:** ‡∏ó‡∏î‡∏™‡∏≠‡∏ö
- ‡∏Ñ‡∏•‡∏¥‡∏Å "Execute Node"
- ‡∏î‡∏π Output ‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏°‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### 2.4 Node 3: Code (‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)

**Step 1:** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° HTTP Request ‚Üí Code

**Step 2:** ‡πÉ‡∏™‡πà JavaScript Code:
```javascript
// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å API
const weatherData = $input.all()[0].json;

// ‡πÅ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
const temp = Math.round(weatherData.main.temp);
const humidity = weatherData.main.humidity;
const weatherMain = weatherData.weather[0].main;
const description = weatherData.weather[0].description;
const feelsLike = Math.round(weatherData.main.feels_like);

// ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏ù‡∏ô‡∏ï‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
const rainKeywords = ['rain', 'drizzle', 'thunderstorm', '‡∏ù‡∏ô', '‡∏û‡∏≤‡∏¢‡∏∏'];
const isRaining = rainKeywords.some(keyword => 
  weatherMain.toLowerCase().includes(keyword.toLowerCase()) ||
  description.toLowerCase().includes(keyword.toLowerCase())
);

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
let message = `üå§Ô∏è ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ\n`;
message += `üìç ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø\n`;
message += `üå°Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥: ${temp}¬∞C (‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô ${feelsLike}¬∞C)\n`;
message += `üíß ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô: ${humidity}%\n`;
message += `‚òÅÔ∏è ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®: ${description}\n`;

if (isRaining) {
  message += `\n‚òî ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ù‡∏ô‡∏ï‡∏Å ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏û‡∏Å‡∏£‡πà‡∏°‡∏ô‡∏∞! üåÇ`;
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Google Sheets
const currentDate = new Date();
const dateStr = currentDate.toLocaleDateString('th-TH');
const timeStr = currentDate.toLocaleTimeString('th-TH');

return {
  temperature: temp,
  humidity: humidity,
  weather: weatherMain,
  description: description,
  isRaining: isRaining,
  message: message,
  dateStr: dateStr,
  timeStr: timeStr,
  feelsLike: feelsLike
};
```

**Step 3:** ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Code
- ‡∏Ñ‡∏•‡∏¥‡∏Å "Execute Node"
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Output ‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÅ‡∏•‡πâ‡∏ß

### 2.5 Node 4: IF (‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ù‡∏ô‡∏ï‡∏Å)

**Step 1:** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Code ‚Üí IF

**Step 2:** ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ IF:
```
Conditions:
- Value 1: {{ $json.isRaining }}
- Operation: Equal
- Value 2: true
```

### 2.6 Node 5: HTTP Request (Line Notify) - ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏à‡∏≤‡∏Å True

**Step 1:** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏à‡∏≤‡∏Å "True" output ‡∏Ç‡∏≠‡∏á IF Node

**Step 2:** ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ HTTP Request:
```
Authentication: None
Request Method: POST
URL: https://notify-api.line.me/api/notify
Headers:
  Authorization: Bearer {{ $env.LINE_NOTIFY_TOKEN }}
  Content-Type: application/x-www-form-urlencoded
Body:
  Content Type: Form-Data Multipart
  Parameters:
    message: {{ $json.message }}
```

**Step 3:** ‡πÄ‡∏û‡∏¥‡πà‡∏° Environment Variable:
- `LINE_NOTIFY_TOKEN` = your_line_token

### 2.7 Node 6: Google Sheets (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)

**Step 1:** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏à‡∏≤‡∏Å Code Node (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà IF)

**Step 2:** ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Google Sheets:
```
Authentication: Service Account
  Service Account Email: ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå JSON
  Private Key: ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå JSON
  
Operation: Append
Document: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Weather Data" sheet
Range: A:G
Values:
  - {{ $json.dateStr }}
  - {{ $json.timeStr }}
  - {{ $json.temperature }}
  - {{ $json.humidity }}
  - {{ $json.weather }}
  - {{ $json.description }}
  - {{ $json.isRaining }}
```

---

## üß™ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö

### 3.1 ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡∏•‡∏∞ Node

1. **Schedule Trigger**: ‡∏Ñ‡∏•‡∏¥‡∏Å "Execute Node"
2. **HTTP Request**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
3. **Code**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
4. **IF**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö logic ‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ó‡∏≤‡∏á
5. **Line Notify**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô Line
6. **Google Sheets**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ä‡∏µ‡∏ï

### 3.2 ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Workflow ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

1. ‡∏Ñ‡∏•‡∏¥‡∏Å "Execute Workflow" (‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô)
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
   - ‚úÖ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô Line (‡∏ñ‡πâ‡∏≤‡∏ù‡∏ô‡∏ï‡∏Å)
   - ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô Google Sheets
   - ‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ Error ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞ Node

### 3.3 ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Schedule

1. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Cron expression ‡πÄ‡∏õ‡πá‡∏ô `*/1 * * * *` (‡∏ó‡∏∏‡∏Å‡∏ô‡∏≤‡∏ó‡∏µ)
2. ‡∏£‡∏≠‡∏î‡∏π 1-2 ‡∏ô‡∏≤‡∏ó‡∏µ
3. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô `0 8 * * *`

---

## üé® ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå

### 4.1 ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏™‡∏π‡∏á

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Code Node:**
```javascript
// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏±‡∏á isRaining check
const isTooHot = temp > 35;
const isTooCold = temp < 20;

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô message
if (isTooHot) {
  message += `\nüî• ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏£‡πâ‡∏≠‡∏ô‡∏°‡∏≤‡∏Å! ‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ ‡∏ô‡∏∞`;
} else if (isTooCold) {
  message += `\nüßä ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏¢‡πá‡∏ô ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÉ‡∏™‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡∏≤‡∏ß`;
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô return
return {
  // ... existing fields
  isTooHot: isTooHot,
  isTooCold: isTooCold
};
```

### 4.2 ‡πÄ‡∏û‡∏¥‡πà‡∏° Weekly Summary

**‡πÄ‡∏û‡∏¥‡πà‡∏° Schedule Trigger ‡πÉ‡∏´‡∏°‡πà:**
```
Cron: 0 20 * * 0  // ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå 8 ‡πÇ‡∏°‡∏á‡πÄ‡∏¢‡πá‡∏ô
```

**‡πÄ‡∏û‡∏¥‡πà‡∏° Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå:**
```javascript
// ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 7 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤
const sevenDaysAgo = new Date();
sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
let weeklyMessage = `üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ\n`;
weeklyMessage += `üìÖ ${sevenDaysAgo.toLocaleDateString('th-TH')} - ${new Date().toLocaleDateString('th-TH')}\n\n`;
// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ï‡πà‡∏≤‡∏á‡πÜ

return { weeklyMessage: weeklyMessage };
```

### 4.3 ‡πÄ‡∏û‡∏¥‡πà‡∏° Error Handling

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç HTTP Request Node:**
```javascript
// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô Settings
Continue on Fail: true
```

**‡πÄ‡∏û‡∏¥‡πà‡∏° Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Error:**
```javascript
const input = $input.all()[0];

if (!input.json || input.json.error) {
  return {
    error: true,
    message: "‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö"
  };
}

// ... rest of code
```

---

## üìä ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: Monitor ‡πÅ‡∏•‡∏∞ Analytics

### 5.1 ‡∏™‡∏£‡πâ‡∏≤‡∏á Dashboard ‡πÉ‡∏ô Google Sheets

1. ‡πÄ‡∏õ‡∏¥‡∏î Google Sheets
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Sheet ‡πÉ‡∏´‡∏°‡πà‡∏ä‡∏∑‡πà‡∏≠ "Dashboard"
3. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü:
   ```
   A1: =SPARKLINE(FILTER('Weather Data'!C:C,'Weather Data'!A:A<>"")))
   A2: ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ 7 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤
   
   B1: =AVERAGE(FILTER('Weather Data'!C:C,'Weather Data'!A:A>=TODAY()-7))
   B2: ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
   
   C1: =COUNTIF(FILTER('Weather Data'!G:G,'Weather Data'!A:A>=TODAY()-7),TRUE)
   C2: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ù‡∏ô‡∏ï‡∏Å
   ```

### 5.2 ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Monitoring

**‡πÄ‡∏û‡∏¥‡πà‡∏° Node ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Health Check:**
```javascript
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ workflow ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
const lastRun = new Date();
const healthStatus = {
  timestamp: lastRun.toISOString(),
  status: "healthy",
  message: "Weather alert system is running normally"
};

return healthStatus;
```

---

## üîç ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 6: Troubleshooting

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

**1. OpenWeatherMap API ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô**
```
Error: 401 Unauthorized
Solution: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API key ‡πÉ‡∏ô Environment Variables
```

**2. Line Notify ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°**
```
Error: 400 Bad Request
Solution: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Token ‡πÅ‡∏•‡∏∞ Content-Type header
```

**3. Google Sheets ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**
```
Error: 403 Forbidden
Solution: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Service Account permissions
```

### Debug Tips

1. **‡πÉ‡∏ä‡πâ Console Log:**
```javascript
console.log("Weather data:", weatherData);
console.log("Processed data:", processedData);
```

2. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö HTTP Response:**
- ‡∏î‡∏π Status Code (200 = ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)
- ‡∏î‡∏π Response Body
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Headers

3. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö Manual:**
- ‡πÉ‡∏ä‡πâ Manual Trigger ‡πÅ‡∏ó‡∏ô Schedule
- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡∏•‡∏∞ Node
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Data Flow

---

## üéâ ‡∏™‡∏£‡∏∏‡∏õ

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏≥ Hands-on ‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ:

‚úÖ **‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥**  
‚úÖ **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á API Integration**  
‚úÖ **‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Google Sheets ‡πÄ‡∏õ‡πá‡∏ô Database**  
‚úÖ **‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô Line**  
‚úÖ **‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Environment Variables**  
‚úÖ **‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô Error Handling**

### Next Steps

1. ‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
2. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢
3. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® (AQI)
4. ‡∏™‡∏£‡πâ‡∏≤‡∏á Mobile App Notification
5. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏® 3-5 ‡∏ß‡∏±‡∏ô

**üöÄ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Hands-on ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ!**
